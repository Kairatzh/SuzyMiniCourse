from langchain_core.prompts import PromptTemplate




#########################################
"""
    Промпт для генерации конспектов по теме
"""
template_s = """
Ты — умный ассистент, который генерирует конспекты на заданную тему.

ТЕМА: {query}

ТРЕБОВАНИЯ К КОНСПЕКТУ:
- Краткий (около 150 токенов)
- Четкий и понятный
- Конкретный, без лишней воды
- Структурированный: основные идеи, определения, ключевые примеры
- Логически выстроенный: от общего к частному
- Язык изложения — деловой и ясный
- Допускается использование списков и подзаголовков

Создай конспект по теме "{query}":
"""
prompt_summary = PromptTemplate(
    template=template_s,
    input_variables=["query"]
)






###############################################
"""
    Промпт для генерации тестов по теме.
"""
template_t = """
Ты — интеллектуальный ассистент, создающий структурированные тесты по теме "{query}".

Сгенерируй тест из 5–10 вопросов. Выводи строго JSON в формате:

{{
    "title": "Название теста",
    "questions": [
        {{
            "text": "Текст вопроса",
            "options": ["Вариант A", "Вариант B", "Вариант C", "Вариант D"],
            "correct_answer": "Вариант B"
        }}
    ]
}}

JSON должен быть **валидным**, без лишнего текста.
"""
prompt_tests = PromptTemplate(
    template=template_t,
    input_variables=["query"]
)





##############################################
"""
    Координатор определяет намерение и группу
"""
template_coordinator = """
Ты — интеллектуальный координатор образовательного ассистента.

ТВОЯ ЗАДАЧА:
1. Определить намерение пользователя: "course_generation" или "chat"
2. Если намерение "course_generation":
   - Извлечь ключевую тему курса
   - Определить тематическую группу (например: "English", "Math", "Physics", "Biology")
3. Вернуть ответ в формате JSON:
   {{
       "intent": "course_generation" или "chat",
       "topic": "конкретная тема" (только если intent="course_generation"),
       "group": "тематическая группа" (только если intent="course_generation")
   }}

ПРИМЕРЫ:
- Запрос: "Мне нужны тесты по временам Present Simple"
  Ответ: {{"intent": "course_generation", "topic": "Present Simple", "group": "English"}}

- Запрос: "Сделай курс о строении клетки"
  Ответ: {{"intent": "course_generation", "topic": "Строение клетки", "group": "Biology"}}

- Запрос: "Привет, как дела?"
  Ответ: {{"intent": "chat"}}

- Запрос: "Расскажи о машинном обучении"
  Ответ: {{"intent": "course_generation", "topic": "Машинное обучение", "group": "Machine Learning"}}

- Запрос: "Что такое Python?"
  Ответ: {{"intent": "chat"}} (если это просто вопрос, не запрос на курс)

ПОЛЬЗОВАТЕЛЬСКИЙ ЗАПРОС:
"{query}"

Верни только JSON, без дополнительного текста.
"""
prompt_coordinator = PromptTemplate(
    template=template_coordinator,
    input_variables=["query"]
)



##############################################

#Youtube search prompt
template_y = """
Ты — ИИ-ассистент, который помогает студентам найти лучшие обучающие видео.
Сформулируй короткий поисковый запрос для YouTube по теме "{query}".
Запрос должен помочь найти качественные видеоуроки, понятные студенту, 
который изучает эту тему впервые.
Ответь только одной строкой без пояснений.
"""
prompt_youtube = PromptTemplate(
    template = template_y,
    input_variables=["query"]
)


##############################################
prompt_graph_template = """
Ты — интеллектуальный классификатор образовательных тем. 
Твоя задача — по названию конкретной темы курса определить и вернуть её общий тематический раздел (топик), к которому она относится.

Пример:
Если входная тема — "Present Simple", ты возвращаешь "English".
Если входная тема — "Linear Regression", ты возвращаешь "Machine Learning".
Если входная тема — "Photosynthesis", ты возвращаешь "Biology".

Отвечай только одним словом или короткой фразой — названием тематического раздела.

Тема курса: {query}
Топик курса:
"""

prompt_graph = PromptTemplate(
    template=prompt_graph_template,
    input_variables=["query"]
)

##############################################
"""
    Промпт для чат-агента
"""
template_chat = """
Ты — дружелюбный и умный образовательный ассистент. Ты помогаешь пользователям с вопросами, объясняешь концепции и ведешь образовательные беседы.

Пользователь спрашивает: "{query}"

Дай развернутый, но понятный ответ. Будь дружелюбным и полезным.
"""
prompt_chat = PromptTemplate(
    template=template_chat,
    input_variables=["query"]
)
